# 공연/공연장/좌석 선택 요구사항

> 최종 수정일: 2025-12-16

---

## 1. 공연장 등록

공연 등록 전 공연장을 먼저 등록해야 함.

| 항목 | 타입 | 필수 | 비고 |
|------|------|------|------|
| 공연장명 | TEXT | O | |
| 공연장 대표번호 | TEXT | O | |
| 공연장 주소 | TEXT | O | |
| 좌석배치도 | URL/IMAGE | | 좌석 선택 화면용 |
| 등급별 허용좌석수 | 별도 테이블 | O | 공연장마다 고정 |

### 등급별 허용좌석수 테이블
- 공연장 ID
- 좌석 등급 (VIP, PREMIUM, STANDARD 등)
- 허용 좌석수

---

## 2. 공연 등록

공연 상세에 필요한 정보를 등록.

| 항목 | 타입 | 필수 | 비고 |
|------|------|------|------|
| 공연명 | TEXT | O | |
| 설명 | TEXT | O | |
| 출연진 | TEXT | | 출연 배우/아티스트 정보 |
| 카테고리/장르 | TEXT | O | 뮤지컬, 연극, 콘서트 등 |
| 러닝타임 | INT | | 분 단위 |
| 관람등급 | TEXT | | 전체관람가, 12세 이상 등 |
| 대표 이미지 (썸네일) | IMAGE | O | 목록/카드용 |
| 상품상세 이미지 | IMAGE | O | MinIO 업로드 |
| 등급별 가격 | 별도 테이블 | O | 결제 연동 |
| 할인정보 | TEXT | | |
| 이용안내 | TEXT | | |
| 장소 | FK (공연장) | O | 지도 API 연동 |
| 취소 및 환불규정 | TEXT | | |
| 공연기간 | DATE | O | 시작일 ~ 종료일 |
| 노출여부 | BOOLEAN | O | 기본값: 미노출 |

### 등급별 가격 테이블 (TicketOption)
- 공연 회차 ID (PerformanceSchedule FK)
- 좌석 등급 (VIP, R, S 등)
- 가격
- 해당 등급 총 좌석 수 (`totalQuantity`)

---

## 3. 공연 회차 등록

공연별로 여러 회차를 등록.

| 항목 | 타입 | 필수 | 비고 |
|------|------|------|------|
| 공연 ID | FK | O | |
| 공연 일시 | DATETIME | O | 실제 공연 시작 시간 |
| 판매 시작일 | DATETIME | | 예매 오픈 시간 |

---

## 4. 좌석 선택

### 4-1. 예매 달력 모달

공연상세 화면에서 "예매하기" 버튼 클릭 시:

1. 달력 모달팝업 표시
2. 날짜 선택 시 하단에 노출:
   - 예약 가능 시간 (회차)
   - 예약 가능 좌석 등급
   - 잔여 좌석수

**필요 API**: `GET /api/performances/{id}/schedules/calendar`

### 4-2. 좌석 선택 팝업

날짜 및 시간 선택 후 "예매하기" 버튼 클릭 시:

1. 공연장 좌석배치도 팝업 표시
2. 예약 가능한 좌석 표시
3. 좌석 선택 (복수 선택 가능)

**필요 API**: `GET /api/schedules/{scheduleId}/seats`

### 4-3. 좌석 선택 규칙

| 규칙 | 값 |
|------|------|
| 좌석 점유 시간 | 10분 |
| 최대 선택 좌석수 | 4석 |
| 비회원 예매 | 불가 (로그인 필수) |

### 4-4. 주문 페이지 이동

좌석 선택 후 "예매하기" 버튼 클릭 시:
- 프론트엔드에서 주문하기 페이지로 이동
- 선택한 좌석 정보 전달

---

## 5. 추후 개발 예정

아래 기능은 1차 개발 범위에서 제외, 추후 개발 예정.

| 기능 | 설명 |
|------|------|
| 결제 프로세스 | 결제 수단 연동 (토스/카카오페이 등) |
| 예매 취소/환불 | 사용자 예매 취소 및 환불 처리 |
| 알림 발송 | 예매 확인 이메일/SMS 발송 |
| 관리자 기능 | 예매 현황 조회, 통계, 정산 |
